{% extends 'base.html' %}

{% block title %}Home - Movie Reviews{% endblock %}

{% block content %}
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-3xl font-semibold text-slate-800">Featured</h1>
      <p class="text-slate-500">Curated and top-rated picks</p>
    </div>
    <div>
      <a href="{% url 'movies:movie_list' %}" class="inline-block px-4 py-2 border border-slate-200 rounded text-slate-700 hover:bg-slate-50">Browse all movies</a>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    {% for movie in featured %}
      <div class="bg-white bg-opacity-70 backdrop-blur-sm border border-white border-opacity-30 rounded-lg shadow-lg overflow-hidden flex flex-col hover:shadow-xl transition-shadow">
        {% if movie.photo_url %}
          <img src="{{ movie.photo_url }}" alt="{{ movie.title }}" class="w-full h-60 object-cover">
        {% elif movie.poster_url %}
          <img src="{{ movie.poster_url }}" alt="{{ movie.title }}" class="w-full h-60 object-cover">
        {% else %}
          <img src="https://via.placeholder.com/400x600?text=No+Image" alt="No image" class="w-full h-60 object-cover">
        {% endif %}
        <div class="p-4 flex-1 flex flex-col">
          <h3 class="text-lg font-semibold text-slate-900">{{ movie.title }}</h3>
          <p class="text-sm text-slate-600 mt-1">{{ movie.year }} • {{ movie.duration_minutes }}</p>
          <p class="text-slate-700 mt-2 flex-1 text-sm leading-relaxed">{{ movie.description|truncatechars:120 }}</p>
          <div class="mt-4 flex items-center justify-between">
            <div class="text-sm text-slate-800 font-medium">⭐ {{ movie.avg_rating|default:'0.0' }} <span class="text-slate-600 font-normal">({{ movie.review_count|default:0 }})</span></div>
            <a href="{% url 'movies:movie_detail' movie.slug %}" class="px-3 py-1 bg-indigo-600 text-white rounded text-sm font-medium hover:bg-indigo-700">Details</a>
          </div>
        </div>
      </div>
    {% empty %}
      <p class="text-slate-700">No featured movies yet.</p>
    {% endfor %}
  </div>

  <h2 class="text-2xl font-semibold mb-4">Latest</h2>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
    {% for movie in latest %}
      <div class="bg-white bg-opacity-70 backdrop-blur-sm border border-white border-opacity-30 rounded-lg shadow hover:shadow-md transition-shadow">
        {% if movie.photo_url %}
          <img src="{{ movie.photo_url }}" alt="{{ movie.title }}" class="w-full h-44 object-cover rounded-t-lg">
        {% elif movie.poster_url %}
          <img src="{{ movie.poster_url }}" alt="{{ movie.title }}" class="w-full h-44 object-cover rounded-t-lg">
        {% else %}
          <img src="https://via.placeholder.com/300x400?text=No+Image" alt="No image" class="w-full h-44 object-cover rounded-t-lg">
        {% endif %}
        <div class="p-3">
          <div class="text-sm font-medium text-slate-900">{{ movie.title }}</div>
          <div class="text-xs text-slate-700">{{ movie.year }}</div>
        </div>
      </div>
    {% endfor %}
  </div>

  <h2 class="text-2xl font-semibold mb-4">Top Rated</h2>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    {% for movie in top_rated %}
      <div class="bg-white bg-opacity-70 backdrop-blur-sm border border-white border-opacity-30 rounded-lg shadow-lg p-4 flex flex-col hover:shadow-xl transition-shadow">
        {% if movie.photo_url %}
          <img src="{{ movie.photo_url }}" alt="{{ movie.title }}" class="w-full h-48 object-cover rounded-lg">
        {% elif movie.poster_url %}
          <img src="{{ movie.poster_url }}" alt="{{ movie.title }}" class="w-full h-48 object-cover rounded-lg">
        {% else %}
          <img src="https://via.placeholder.com/400x500?text=No+Image" alt="No image" class="w-full h-48 object-cover rounded-lg">
        {% endif %}
        <div class="mt-3 flex-1">
          <h3 class="font-semibold text-lg text-slate-900">{{ movie.title }}</h3>
          <div class="text-sm text-slate-800 font-medium">⭐ {{ movie.avg_rating|default:'0.0' }}</div>
        </div>
        <div class="mt-4">
          <a href="{% url 'movies:movie_detail' movie.slug %}" class="inline-block px-4 py-2 border border-indigo-300 rounded-lg text-indigo-700 font-medium hover:bg-indigo-50">View</a>
        </div>
      </div>
    {% empty %}
      <p class="text-slate-700">No top rated movies yet.</p>
    {% endfor %}
  </div>

{% endblock %}
